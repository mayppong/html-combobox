<template>
  <style>
    input { margin-right: 0; }
    button { margin-left: 0; }
    ul { 
      border: 1px solid #ccc;
      display: none; 
      list-style: none;
      margin: 0 0 0 2px; 
      padding: 0.5em 0.5em; 
      width: 168px;
    }
    ::content li:hover { background-color: blue; }
  </style>
  <input type=text /> <button>&#x25BC</button> 
  <ul> 
    <content select="li"> </content> 
  </ul>
</template>

<script type="text/javascript">
  "use strict";
  
  var comboboxPrototype = {
    __proto__: Object.create(HTMLElement.prototype),
    createdCallback: function() {
      this._buildShadowDOMs();
      this._setupEvents();
      return this;
    },
    _buildShadowDOMs: function() {
      var shadowRoot = this.createShadowRoot();
      var template = document.querySelector("template");
      shadowRoot.appendChild(template.content.cloneNode(true));
      
      return this;
    },
    _setupEvents: function() {
      this.addEventListener('click', this._clickEventDelegation);
      return this;
    },
    _clickEventDelegation: function(event) {
      console.log(event);
      switch( event.target.nodeName ) {
        case "COMBO-BOX":
          this._showOptions(event);
          break;
        case "LI" :
          this._selectOption(event);
          break;
      }
    },
    _showOptions: function(event) {
      console.log(this);
      this.shadowRoot.querySelector('ul').style.display = 'block';
      return this;
    },
    _selectOption: function(event) {
      return this;
    }
  };

  var combobox = document.registerElement('combo-box', {prototype: comboboxPrototype});
</script>