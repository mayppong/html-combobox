<!DOCTYPE html>
<html>
<head>
  <title>Combobox Test</title>
  <!-- <link rel="import" href="src/combobox.html"> -->

  <template>
    <style>
      input { margin-right: 0; }
      button { margin-left: 0; }
      ul { 
        border: 1px solid #ccc;
        display: none; 
        list-style: none;
        margin: 0 0 0 2px; 
        padding: 0.5em 0.5em; 
        width: 168px;
      }
      ::content li:hover { background-color: blue; }
    </style>
    <input type=text /> <button>&#x25BC</button> 
    <ul> 
      <content select="li"> </content> 
    </ul>
  </template>

  <script type="text/javascript">
    "use strict";
    
    var combobox = {
      template: document.currentScript.ownerDocument.querySelector('template'),
      prototype : {
        __proto__: Object.create(HTMLElement.prototype),
        createdCallback: function() {
          this._buildShadowDOMs();
          this._setupEvents();
          return this;
        },
        _buildShadowDOMs: function() {
          var shadowRoot = this.createShadowRoot();
          //var template = comboboxTemplate.querySelector("template");
          shadowRoot.appendChild(combobox.template.content.cloneNode(true));
          
          return this;
        },
        _setupEvents: function() {
          this.addEventListener('click', this._clickEventDelegation);
          return this;
        },
        _clickEventDelegation: function(event) {
          switch( event.target.nodeName ) {
            case "COMBO-BOX":
              this._showOptions(event);
              break;
            case "LI" :
              this._selectOption(event);
              break;
          }
        },
        _showOptions: function(event) {
          this.shadowRoot.querySelector('ul').style.display = 'block';
          return this;
        },
        _selectOption: function(event) {
          return this;
        }
      }
    };

    document.registerElement('combo-box', {prototype: combobox.prototype});
  </script>

</head>
<body>

  <combo-box>
    <li>Canada</li>
    <li>USA</li>
    <li>Thailand</li>
  </combo-box>


  <combo-box>
    <li>Victoria</li>
    <li>Vancouver</li>
    <li>Nanaimo</li>
  </combo-box>

</body>
</html>